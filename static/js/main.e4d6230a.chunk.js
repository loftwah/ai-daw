(this["webpackJsonpai-daw"]=this["webpackJsonpai-daw"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){},,,,,,function(e,t,a){e.exports=a(36)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),i=(a(23),a(3));a(24);function l(){return r.a.createElement("div",null,"menu up top")}var s=a(1),u=a.n(s),d=(a(25),a(7)),m=a(8),p=a(10),h=a(9),f=a(11),E=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).tick=function(){a.setState({data:a.props.data}),a.myReq=window.requestAnimationFrame(a.tick)},a.state={data:a.props.data},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.requestAnimationFrame(this.tick)}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.myReq)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.render(this.state.data))}}]),t}(r.a.Component),v=["bar","beat","sixteenth"];function b(){return r.a.createElement(E,{render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu-button disabled"},u.a.Transport.position.split(":").map((function(e,t){return r.a.createElement("span",{className:"num-box",key:t},r.a.createElement("span",{className:"num"},Math.floor(e)),r.a.createElement("span",{className:"num-title"},v[t]))}))))}})}a(26);function g(e){var t=Object(n.useState)(e.source.volume.value),a=Object(i.a)(t,2),c=a[0],o=a[1];Object(n.useEffect)((function(){e.source.volume.value=c}));var l=new u.a.Meter;return e.source.connect(l),r.a.createElement(E,{render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:100,textAlign:"left",position:"relative"},className:"menu-button disabled"},r.a.createElement("input",{className:"fader",style:{position:"absolute",width:100,margin:0},type:"range",min:"-50",max:"10",step:"0.1",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement("input",{type:"number",value:c,onChange:function(e){o(e.target.value)},style:{width:"100%"}}),r.a.createElement("div",{className:"meter",style:{width:Math.round(100*(t=Math.min(l.getLevel(),0),Math.pow(10,t/40)))+"%"}})),r.a.createElement("span",{className:"clipping",style:{opacity:l.getLevel()>0?1:0,transition:l.getLevel()>0?"none":"opacity 2s"}},"!"));var t}})}var k=a(6);a(27),a(28),a(12);function y(e){return r.a.createElement("div",{className:"track-part track-header"},r.a.createElement("div",null,e.track.instrument.toString()),r.a.createElement(g,{source:e.track.instrument}),r.a.createElement("button",{className:"delete-track",onClick:function(){e.methods.removeTrack(e.index)}},"x"))}var O=a(15),N=a.n(O);function j(e){return u.a.Time(e).valueOf()*u.a.Transport.bpm.value/60}function w(e,t){return u.a.Time(u.a.Time(e).valueOf()+u.a.Time(t).valueOf()).toBarsBeatsSixteenths()}function T(e,t){return u.a.Time(e).valueOf()>u.a.Time(t).valueOf()?1:u.a.Time(e).valueOf()===u.a.Time(t).valueOf()?0:-1}function x(e){var t="0:0:0";return e.notes.forEach((function(e){var a=w(e.position,e.duration);T(a,t)>0&&(t=a)})),t}function S(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){var a=t.current;!function(e,t,a,n){t.width=4*parseFloat(N()(t).css("width")),t.height=4*parseFloat(N()(t).css("height")),e.clearRect(0,0,t.width,t.height),e.strokeStyle="black",e.lineWidth=t.height/16;var r=128,c=0;a.notes.forEach((function(e){e.pitch<r&&(r=e.pitch),e.pitch>c&&(c=e.pitch)})),a.notes.forEach((function(a){var o=j(a.position)*n.beatPixels*4,i=t.height-((a.pitch-r)/(c-r)*.6+.2)*t.height;e.beginPath(),e.moveTo(o,i),e.lineTo(o+n.beatPixels*j(a.duration)*4,i),e.stroke()}))}(a.getContext("2d"),a,e.track,e.data)})),r.a.createElement("div",{className:"track-canvas-wrapper",style:{width:e.data.beatPixels*Math.ceil(j(x(e.track)))}},r.a.createElement("canvas",{className:"track-canvas",ref:t},"Your browser does not support the canvas."))}function P(e){return r.a.createElement("div",{className:"track-part track-display-wrapper",style:{paddingLeft:e.paddingLeft}},r.a.createElement("div",{className:"track-display",style:{width:j(e.data.projectLength)*e.data.beatPixels}},r.a.createElement(S,{track:e.track,data:e.data})))}a(29);var L=a(4);function M(e){return r.a.createElement(E,{render:function(t){return r.a.createElement("div",{className:"playhead ",style:{width:"top"===e.variant?10:1,left:e.data.trackDisplayPaddingLeft+e.data.beatPixels*j(u.a.Transport.position)}})}})}a(35);function C(e){return r.a.createElement(E,{render:function(t){return r.a.createElement("div",{className:"end-screen",style:{left:e.data.trackDisplayPaddingLeft+e.data.beatPixels*j(e.data.projectLength)}})}})}var A=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(k.ScrollSync,null,r.a.createElement("div",{className:"master"},r.a.createElement("div",{className:"column left"},r.a.createElement("div",{className:"pane top left track-part"},"header"),r.a.createElement(k.ScrollSyncPane,{group:["horizontal","vertical"]},r.a.createElement("div",{className:"pane bottom left hidden-scrollbar"},this.props.data.tracks.map((function(t,a){return r.a.createElement(y,{key:a,index:a,track:e.props.data.tracks[a],data:e.props.data,methods:e.props.methods})}))))),r.a.createElement("div",{className:"column right"},r.a.createElement(k.ScrollSyncPane,{group:["horizontal","vertical"]},r.a.createElement("div",{className:"pane top right hidden-scrollbar"},r.a.createElement(M,{variant:"top",data:Object.assign({},this.props.data,{trackDisplayPaddingLeft:8})}),r.a.createElement(C,{data:Object.assign({},this.props.data,{trackDisplayPaddingLeft:8})}),r.a.createElement("div",{className:"track-part"},"headerheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheaderheader"))),r.a.createElement(k.ScrollSyncPane,{group:["horizontal","vertical"]},r.a.createElement("div",{className:"pane bottom right"},r.a.createElement(M,{variant:"bottom",data:Object.assign({},this.props.data,{trackDisplayPaddingLeft:8})}),r.a.createElement(C,{data:Object.assign({},this.props.data,{trackDisplayPaddingLeft:8})}),this.props.data.tracks.map((function(t,a){return r.a.createElement(P,{paddingLeft:8,key:a,index:a,track:e.props.data.tracks[a],data:e.props.data,methods:e.props.methods})})))))))}}]),t}(n.Component),F=a(5);function D(){for(var e=[],t=0;t<32;t++)e.push({pitch:Math.floor(30*Math.random())+40,duration:"8n",position:"0:0:"+2*t});return e}function B(e){var t="0:0:0";return u.a.Transport.loop&&(t=u.a.Time(u.a.Transport.loopEnd).toBarsBeatsSixteenths()),e.forEach((function(e){e.notes.forEach((function(e){var a=w(e.position,e.duration);T(a,t)>0&&(t=a)}))})),"0:"+Math.ceil(j(t))+":0"}u.a.Transport.setLoopPoints(0,"1m"),u.a.Transport.loop=!0;var q=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(120),s=Object(i.a)(o,2),d=s[0],m=s[1],p=Object(n.useState)(0),h=Object(i.a)(p,2),f=h[0],E=h[1],v=Object(n.useState)(100),k=Object(i.a)(v,2),y=k[0],O=k[1],N=Object(n.useState)([{instrument:(new u.a.Synth).toMaster(),notes:[{pitch:60,duration:"8n",position:"0:0:0"},{pitch:62,duration:"8n",position:"0:1:0"},{pitch:64,duration:"8n",position:"0:2:0"}]}]),j=Object(i.a)(N,2),w=j[0],T=j[1];return Object(n.useEffect)((function(){a?u.a.Transport.start():u.a.Transport.pause(),u.a.Transport.bpm.value=d,u.a.Transport.cancel(),w.forEach((function(e){e.notes.forEach((function(t){u.a.Transport.schedule((function(a){e.instrument.triggerAttackRelease(u.a.Frequency(t.pitch,"midi").toNote(),t.duration,a)}),t.position)}))}))})),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(l,null),r.a.createElement("div",{className:"App-menu-bar"},r.a.createElement("input",{id:"title",type:"text",placeholder:"Untitled Project"})),r.a.createElement("div",{className:"App-menu-bar"},r.a.createElement("button",{className:"menu-button",onClick:function(){T(w.concat({instrument:(new u.a.Synth).toMaster(),notes:D()}))}},r.a.createElement(L.a,{icon:F.c})," new beat"),r.a.createElement("button",{className:"menu-button",onClick:function(){u.a.Transport.pause(),u.a.Transport.position="0:0:0",a?u.a.Transport.start():u.a.Transport.pause()}},r.a.createElement(L.a,{icon:F.d})),r.a.createElement("button",{className:"menu-button",onClick:function(){"running"!==u.a.context.state&&u.a.context.resume(),c(!a)}},a?r.a.createElement(L.a,{icon:F.a}):r.a.createElement(L.a,{icon:F.b})),r.a.createElement("button",{className:"menu-button"},r.a.createElement(L.a,{icon:F.e})),r.a.createElement("button",{className:"menu-button"},r.a.createElement("label",null,"Tempo:")," ",r.a.createElement("input",{id:"tempo",type:"number",value:d,onChange:function(e){return m(e.target.value)}})),r.a.createElement("button",{className:"menu-button"},r.a.createElement("label",null,"Key:")," ",r.a.createElement("select",{id:"key",value:f,onChange:function(e){return E(e.target.value)}},r.a.createElement("option",null,"0"),r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"),r.a.createElement("option",null,"7"),r.a.createElement("option",null,"8"),r.a.createElement("option",null,"9"),r.a.createElement("option",null,"10"),r.a.createElement("option",null,"11"))),r.a.createElement(b,null),r.a.createElement(g,{source:u.a.Master}),r.a.createElement("input",{type:"range",min:"10",max:"400",step:"20",value:y,onChange:function(e){return O(e.target.value)}}),y)),r.a.createElement(A,{data:{tracks:w,beatPixels:y,projectLength:B(w)},methods:{removeTrack:function(e){T(w.slice(0,e).concat(w.slice(e+1)))}}}),r.a.createElement("footer",{className:"App-menu-bar"},"fotoer"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[18,1,2]]]);
//# sourceMappingURL=main.e4d6230a.chunk.js.map