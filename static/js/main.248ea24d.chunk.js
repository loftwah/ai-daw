(this["webpackJsonpai-daw"]=this["webpackJsonpai-daw"]||[]).push([[0],[,,,,,,,function(e,t,a){},,,,,,,,,,,function(e,t,a){e.exports=a(39)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),i=(a(23),a(3)),l=(a(24),{padding:8,background:"#222222",color:"white"});function s(){return r.a.createElement("div",{style:l},r.a.createElement("strong",null,"AI DAW")," by sibeliusy")}var u=a(1),m=a.n(u),p=(a(25),a(8)),d=a(9),h=a(11),E=a(10),f=a(12),v=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).tick=function(){a.setState({data:a.props.data}),a.myReq=window.requestAnimationFrame(a.tick)},a.state={data:a.props.data},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){window.requestAnimationFrame(this.tick)}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.myReq)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.render(this.state.data))}}]),t}(r.a.Component),b=["bar","beat","sixteenth"];function g(){return r.a.createElement(v,{render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu-button disabled"},m.a.Transport.position.split(":").map((function(e,t){return r.a.createElement("span",{className:"num-box",key:t},r.a.createElement("span",{className:"num"},Math.floor(e)),r.a.createElement("span",{className:"num-title"},b[t]))}))))}})}a(26);function y(e){var t=Object(n.useState)(e.source.volume.value),a=Object(i.a)(t,2),c=a[0],o=a[1];Object(n.useEffect)((function(){e.source.volume.value=c}));var l=new m.a.Meter;return e.source.connect(l),r.a.createElement(v,{render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:100,textAlign:"left",position:"relative"},className:"menu-button disabled"},r.a.createElement("input",{className:"fader",style:{position:"absolute",width:100,margin:0},type:"range",min:"-100",max:"10",step:"0.1",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement("input",{type:"number",value:c,onChange:function(e){o(e.target.value)},style:{width:"100%"}}),r.a.createElement("div",{className:"meter",style:{width:Math.round(100*(t=Math.min(l.getLevel(),0),Math.pow(10,t/50)))+"%"}})),r.a.createElement("span",{className:"clipping",style:{opacity:l.getLevel()>0?1:0,transition:l.getLevel()>0?"none":"opacity 2s"}},"!"));var t}})}var k=a(6);a(27),a(28),a(7);function x(e){return r.a.createElement("div",{className:"track-part track-header"},r.a.createElement("div",null,e.track.instrument.toString()),r.a.createElement(y,{source:e.track.instrument}),r.a.createElement("button",{className:"delete-track",onClick:function(){e.methods.removeTrack(e.index)}},"x"))}var j=a(16);a(29),a(30);function O(e){return m.a.Time(e).valueOf()*m.a.Transport.bpm.value/60}function w(e,t){return m.a.Time(m.a.Time(e).valueOf()+m.a.Time(t).valueOf()).toBarsBeatsSixteenths()}function N(e,t){return m.a.Time(m.a.Time(e).valueOf()-m.a.Time(t).valueOf()).toBarsBeatsSixteenths()}function T(e,t){return m.a.Time(e).valueOf()>m.a.Time(t).valueOf()?1:m.a.Time(e).valueOf()===m.a.Time(t).valueOf()?0:-1}function P(e){var t="0:0:0";return e.notes.forEach((function(e){var a=w(e.position,e.duration);T(a,t)>0&&(t=a)})),t}function M(e){return r.a.createElement("div",{className:"track-region",style:{width:e.data.beatPixels*O(P(e.track))}},r.a.createElement("div",{className:"track-canvas-wrapper",style:{width:e.data.beatPixels*O(P(e.track))-1}},r.a.createElement("div",{className:"block-title"},"heyo"),r.a.createElement("svg",{preserveAspectRatio:"none",viewBox:"0 0 100 100",className:"track-canvas",style:{width:"calc(100% + 1px)"}},function(e,t){var a=e.notes.map((function(e){return e.pitch})),n=Math.min.apply(Math,Object(j.a)(a)),c=Math.max.apply(Math,Object(j.a)(a)),o=[],i=100/O(P(e));return e.notes.forEach((function(e,t){var a=O(e.position)*i,l=100-100*((e.pitch-n)/(c-n)*.6+.2),s=a+i*O(e.duration);o.push(r.a.createElement("line",{x1:a,y1:l,x2:s,y2:l,stroke:"black",strokeWidth:4,key:t}))})),r.a.createElement(r.a.Fragment,null,o)}(e.track,e.data))))}function S(e){return r.a.createElement("div",{className:"track-part track-display",style:{padding:e.trackDisplayPadding,width:O(e.data.projectMaxLength)*e.data.beatPixels}},r.a.createElement(M,{track:e.track,data:e.data}))}a(31);function L(e){return r.a.createElement(v,{render:function(t){return r.a.createElement("div",{className:"playhead "+e.variant,style:{height:"top"===e.variant?11:120*e.data.tracks.length,width:"top"===e.variant?11:1,left:("top"===e.variant?Math.ceil(-5.5):0)+e.data.trackDisplayPadding+e.data.beatPixels*O(m.a.Transport.position)}})}})}a(32);function D(e){return r.a.createElement("div",{className:"end-screen",style:{height:"top"===e.variant?"100%":120*e.data.tracks.length,left:e.data.trackDisplayPadding+e.data.beatPixels*O(e.data.projectLength),width:e.data.trackDisplayPadding+e.data.beatPixels*O(N(e.data.projectMaxLength,e.data.projectLength))}})}a(33);function A(e){return r.a.createElement("div",{className:"loop-screen",style:{left:e.data.trackDisplayPadding+O(m.a.Transport.loopStart)*O(e.data.projectLength),width:e.data.beatPixels*O(N(m.a.Transport.loopEnd,m.a.Transport.loopStart))}})}function F(e){return r.a.createElement("div",{className:"track-part top",style:{padding:e.trackDisplayPadding,width:O(e.data.projectMaxLength)*e.data.beatPixels}},r.a.createElement("svg",{height:"100",width:O(e.data.projectMaxLength)*e.data.beatPixels},function(e){for(var t,a,c,o,i,l=[],s=m.a.Transport.timeSignature,u=0;u<O(e.projectMaxLength);u++)l.push((t=u*e.beatPixels,a=Math.floor(u/s),c=u%s,o=e.beatPixels,i=u,o<50?r.a.createElement(n.Fragment,{key:i},0===c?r.a.createElement("text",{x:t+4,y:"1em"},a):r.a.createElement(r.a.Fragment,null),r.a.createElement("rect",{x:t,y:0===c?"0":"1.5em",width:"1",height:"100",fill:"#e6e6e6"})):r.a.createElement(n.Fragment,{key:i},r.a.createElement("text",{x:t+4,y:"1em"},a,".",c),r.a.createElement("rect",{x:t,y:0===c?"0":"1.5em",width:"1",height:"100",fill:"#e6e6e6"}))));return r.a.createElement(r.a.Fragment,null,l)}(e.data)))}var C=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(k.ScrollSync,null,r.a.createElement("div",{className:"master"},r.a.createElement("div",{className:"column left"},r.a.createElement("div",{className:"pane top left track-part top"},"header"),r.a.createElement(k.ScrollSyncPane,{group:["horizontal","vertical"]},r.a.createElement("div",{className:"pane bottom left hidden-scrollbar"},this.props.data.tracks.map((function(t,a){return r.a.createElement(x,{key:a,index:a,track:e.props.data.tracks[a],data:e.props.data,methods:e.props.methods})}))))),r.a.createElement("div",{className:"column right"},r.a.createElement(k.ScrollSyncPane,{group:["horizontal","vertical"]},r.a.createElement("div",{className:"pane top right hidden-scrollbar"},r.a.createElement(L,{variant:"top",data:Object.assign({},this.props.data,{trackDisplayPadding:8})}),r.a.createElement(A,{data:Object.assign({},this.props.data,{trackDisplayPadding:8})}),r.a.createElement(D,{variant:"top",data:Object.assign({},this.props.data,{trackDisplayPadding:8})}),r.a.createElement(F,{data:Object.assign({},this.props.data,{trackDisplayPadding:8})}))),r.a.createElement(k.ScrollSyncPane,{group:["horizontal","vertical"]},r.a.createElement("div",{className:"pane bottom right"},r.a.createElement(L,{variant:"bottom",data:Object.assign({},this.props.data,{trackDisplayPadding:8})}),r.a.createElement(D,{variant:"bottom",data:Object.assign({},this.props.data,{trackDisplayPadding:8})}),this.props.data.tracks.map((function(t,a){return r.a.createElement(S,{paddingLeft:8,key:a,index:a,track:e.props.data.tracks[a],data:e.props.data,methods:e.props.methods})})))))))}}]),t}(n.Component),B=a(4),q=a(5);function W(){for(var e=[],t=0;t<32;t++)e.push({pitch:Math.floor(30*Math.random())+40,duration:"8n",position:"0:0:"+2*t});return e}function R(e){var t="0:0:0";return m.a.Transport.loop&&(t=m.a.Time(m.a.Transport.loopEnd).toBarsBeatsSixteenths()),e.forEach((function(e){e.notes.forEach((function(e){var a=w(e.position,e.duration);T(a,t)>0&&(t=a)}))})),"0:"+Math.ceil(O(t))+":0"}function z(e){var t="96:0:0";return T(R(e),t)>0&&(t=R(e)),t}m.a.Transport.setLoopPoints(0,"1m"),m.a.Transport.loop=!0;var I=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(120),l=Object(i.a)(o,2),u=l[0],p=l[1],d=Object(n.useState)(0),h=Object(i.a)(d,2),E=h[0],f=h[1],v=Object(n.useState)(110),b=Object(i.a)(v,2),k=b[0],x=b[1],j=Object(n.useState)([{instrument:(new m.a.Synth).toMaster(),notes:[{pitch:60,duration:"8n",position:"0:0:0"},{pitch:62,duration:"8n",position:"0:1:0"},{pitch:64,duration:"8n",position:"0:2:0"}]}]),O=Object(i.a)(j,2),w=O[0],N=O[1];return Object(n.useEffect)((function(){a?m.a.Transport.start():m.a.Transport.pause(),m.a.Transport.bpm.value=u,m.a.Transport.cancel(),w.forEach((function(e){e.notes.forEach((function(t){m.a.Transport.schedule((function(a){e.instrument.triggerAttackRelease(m.a.Frequency(t.pitch,"midi").toNote(),t.duration,a)}),t.position)}))}))})),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(s,null),r.a.createElement("div",{className:"App-menu-bar"},r.a.createElement("input",{id:"title",type:"text",placeholder:"Untitled Project"})),r.a.createElement("div",{className:"App-menu-bar"},r.a.createElement("button",{className:"menu-button",onClick:function(){N(w.concat({instrument:(new m.a.Synth).toMaster(),notes:W()}))}},r.a.createElement(B.a,{icon:q.c})," new beat"),r.a.createElement("button",{className:"menu-button",onClick:function(){m.a.Transport.pause(),m.a.Transport.position="0:0:0",a?m.a.Transport.start():m.a.Transport.pause()}},r.a.createElement(B.a,{icon:q.d})),r.a.createElement("button",{className:"menu-button",onClick:function(){"running"!==m.a.context.state&&m.a.context.resume(),c(!a)}},a?r.a.createElement(B.a,{icon:q.a}):r.a.createElement(B.a,{icon:q.b})),r.a.createElement("button",{className:"menu-button"},r.a.createElement(B.a,{icon:q.e})),r.a.createElement("button",{className:"menu-button"},r.a.createElement("label",null,"Tempo:")," ",r.a.createElement("input",{id:"tempo",type:"number",value:u,onChange:function(e){return p(e.target.value)}})),r.a.createElement("button",{className:"menu-button"},r.a.createElement("label",null,"Key:")," ",r.a.createElement("select",{id:"key",value:E,onChange:function(e){return f(e.target.value)}},r.a.createElement("option",null,"0"),r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"),r.a.createElement("option",null,"7"),r.a.createElement("option",null,"8"),r.a.createElement("option",null,"9"),r.a.createElement("option",null,"10"),r.a.createElement("option",null,"11"))),r.a.createElement(g,null),r.a.createElement(y,{source:m.a.Master}),r.a.createElement("input",{type:"range",min:"10",max:"310",step:"50",value:k,onChange:function(e){return x(e.target.value)}}),k)),r.a.createElement(C,{data:{tracks:w,beatPixels:k,projectLength:R(w),projectMaxLength:z(w)},methods:{removeTrack:function(e){N(w.slice(0,e).concat(w.slice(e+1)))}}}),r.a.createElement("footer",{className:"App-menu-bar"},"fotoer"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[18,1,2]]]);
//# sourceMappingURL=main.248ea24d.chunk.js.map