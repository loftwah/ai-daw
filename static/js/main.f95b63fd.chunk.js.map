{"version":3,"sources":["sounds/metronome_bar.mp3","sounds/metronome_beat.mp3","Components/NavBar.js","Components/AnimatedRenderer.js","Components/TransportPosition.js","Components/Meter.js","Components/TrackHeader.js","CoolHelpers.js","Components/Region.js","Components/TimelineGrid.js","Components/TrackDisplay.js","Components/Playhead.js","Components/EndScreen.js","Components/LoopScreen.js","Components/TimelineRuler.js","Components/TracksView.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","styles","padding","background","color","NavBar","style","AnimatedRenderer","props","tick","setState","state","myReq","window","requestAnimationFrame","this","cancelAnimationFrame","render","data","React","Component","numTitles","TransportPosition","className","Tone","Transport","position","split","map","num","index","key","Math","floor","Meter","useState","source","volume","value","setVolume","useEffect","meter","connect","width","textAlign","margin","type","min","max","step","onChange","e","target","round","db","getLevel","opacity","transition","TrackHeader","height","trackHeight","track","instrument","toString","onClick","methods","removeTrack","BBSToBeats","bbs","Time","valueOf","bpm","addBBSTimes","time1","time2","toBarsBeatsSixteenths","subtractBBSTimes","compareBBSTimes","Region","trackDisplayPadding","beatPixels","utils","region","duration","title","preserveAspectRatio","viewBox","pitches","notes","note","pitch","minPitch","maxPitch","items","pseudoBeatPixels","forEach","x","y","x2","push","x1","y1","y2","stroke","strokeWidth","renderRegion","TimelineGrid","projectMaxLength","ts","timeSignature","i","fill","renderRuler","TrackDisplay","regions","Playhead","variant","tracks","length","left","ceil","EndScreen","projectLength","loopStart","loopEnd","TimelineRuler","bar","beat","TracksView","setTrackHeight","newData","Object","assign","group","icon","faArrowsAltV","faArrowsAltH","setBeatPixels","setLoopPoints","loop","metronomeVolume","Volume","metronome","Sampler","Buffer","metronome_bar","metronome_beat","chain","Master","hackNewRegion","random","endPosition","maxLength","App","playing","setPlaying","tempo","setTempo","setKey","Synth","toMaster","setTracks","metronomeIsMuted","setMetronomeIsMuted","mute","start","pause","cancel","schedule","time","triggerAttackRelease","Frequency","toNote","updateTransport","id","placeholder","concat","faPlus","faStepBackward","context","resume","faPause","faPlay","faStepForward","faRuler","slice","Boolean","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f95b63fd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/metronome_bar.25dc09ed.mp3\";","module.exports = __webpack_public_path__ + \"static/media/metronome_beat.fb3e8560.mp3\";","import React from 'react';\n\nconst styles = {\n  padding: 8,\n  background: '#222222',\n  color: 'white',\n}\n\nexport default function NavBar() {\n  return (\n    <div style={styles}><strong>AI DAW</strong> by sibeliusy</div>\n  );\n}\n","import React from 'react';\nexport default class AnimatedRenderer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n\n    };\n  }\n\n  myReq;\n  componentDidMount() {\n    window.requestAnimationFrame(this.tick);\n  }\n  componentWillUnmount() {\n    window.cancelAnimationFrame(this.myReq);\n  }\n  tick = () => {\n    this.setState(\n      this.state\n    );\n    this.myReq = window.requestAnimationFrame(this.tick);\n  }\n  render() {\n    return (\n      <>\n       {this.props.render(this.state.data)}\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport Tone from \"tone\";\nimport './TransportPosition.css';\n\nimport AnimatedRenderer from './AnimatedRenderer';\n\nlet numTitles = ['bar', 'beat', 'sixteenth'];\n\nexport default function TransportPosition() {\n  return (\n\n    <AnimatedRenderer render={data => (\n      <>\n        <div className=\"menu-button static\">{Tone.Transport.position.split(':').map((num, index) => {\n          return (\n            <span className='num-box' key={index}><span className='num'>{Math.floor(num)}</span><span className='num-title'>{numTitles[index]}</span></span>\n          );\n        })}</div>\n      </>\n    )} />\n\n\n  );\n}\n","import React from 'react';\nimport { useState, useEffect } from 'react';\n\nimport Tone from \"tone\";\nimport './Meter.css';\n\nimport AnimatedRenderer from './AnimatedRenderer';\n\nconst scalar = 50; //scalar = 20 is the mathematically correct\n\nfunction dbToAmplitude(db) {\n  return 10**(db/scalar);\n}\n\n// function amplitudeToDb(amplitude) {\n//   return Math.log10(amplitude)*scalar;\n// }\n\n// function roundTo(x, places) {\n//   parseFloat((x).toFixed(places));\n// }\n\nconst width = 100;\n\nexport default function Meter(props) {\n  const [volume, setVolume] = useState(props.source.volume.value);\n  useEffect(() => {\n    props.source.volume.value = volume;\n  });\n\n  var meter = new Tone.Meter();\n  props.source.connect(meter);\n\n// <input className=\"fader\" style={{position:\"absolute\", width: width, margin:0}} type='range' min=\"-50\" max=\"10\" step=\"0.1\" value={volume} onChange={(e) => {setVolume(e.target.value)}}/>\n\n  return (\n    <AnimatedRenderer render={data => (\n      <>\n      <div style={{width: width, textAlign:\"left\", position:\"relative\"}} className=\"menu-button static\">\n\n        <input className=\"fader\" style={{position:\"absolute\", width: width, margin:0}} type='range' min=\"-100\" max=\"10\" step=\"0.1\" value={volume} onChange={(e) => {setVolume(e.target.value)}}/>\n        <input type='number' value={volume} onChange={(e) => {setVolume(e.target.value)}} style={{width: \"100%\"}}/>\n        <div className=\"meter\" style={{width: (Math.round(100*dbToAmplitude(Math.min(meter.getLevel(), 0))))+\"%\"}}></div>\n\n      </div>\n      <span className=\"clipping\" style={{opacity: meter.getLevel() > 0 ? 1 : 0, transition: meter.getLevel() > 0 ? \"none\" : \"opacity 2s\"}}>!</span>\n      {/*Math.round(meter.getLevel())*/}\n      </>\n    )} />\n  );\n}\n\n// fader-volume combo?\n","import React from 'react';\nimport \"./TrackParts.css\";\nimport Meter from \"./Meter\";\n\n/*i have to do this - 2*0 bullshit in the height for some\nreason in order to get it to update . . . no clue why.\nI would think it has something to do with callbacks and\nshit but + 2*0 doesn't work either!\n */\n\nexport default function TrackHeader(props) {\n  return (\n    <div className=\"track-part left bottom track-header\" style={{height: props.data.trackHeight - 2*0}}>\n      <div>{props.track.instrument.toString()}</div>\n      <Meter source={props.track.instrument}/>\n      <button className=\"delete-track\" onClick={() => {props.methods.removeTrack(props.index)}}>x</button>\n    </div>\n  );\n}\n","import Tone from \"tone\";\n\nexport function BBSToBeats(bbs) {\n  return Tone.Time(bbs).valueOf() * Tone.Transport.bpm.value / 60;\n}\n\nexport function addBBSTimes(time1, time2) {\n\treturn Tone.Time( Tone.Time(time1).valueOf() + Tone.Time(time2).valueOf() ).toBarsBeatsSixteenths();\n}\n\nexport function subtractBBSTimes(time1, time2) {\n\treturn Tone.Time( Tone.Time(time1).valueOf() - Tone.Time(time2).valueOf() ).toBarsBeatsSixteenths();\n}\n\nexport function compareBBSTimes(time1, time2) {\n  if (Tone.Time(time1).valueOf() > Tone.Time(time2).valueOf()) {\n    return 1;\n  } else if (Tone.Time(time1).valueOf() === Tone.Time(time2).valueOf()) {\n    return 0;\n  } else {\n    return -1;\n  }\n}\n","import React from 'react';\n// import {useRef, useEffect} from 'react';\nimport './Region.css';\n// import $ from 'jquery';\n\nimport * as utils from '../CoolHelpers';\n\n\n\nconst strokeWidth = 4;\nconst svgSize = 100;\n\nfunction renderRegion(region, data) {\n  // console.log($(svgRef).css('height'));\n  let pitches = region.notes.map(note => note.pitch);\n  let minPitch = Math.min(...pitches);\n  let maxPitch = Math.max(...pitches);\n  let items = [];\n  // console.log(minPitch);\n  let pseudoBeatPixels = svgSize / utils.BBSToBeats(region.duration);\n  region.notes.forEach((note, index) => {\n\n    let x = utils.BBSToBeats(note.position) * pseudoBeatPixels;\n    let y = svgSize - (0.6*((note.pitch - minPitch) / (maxPitch - minPitch))+0.2)  * svgSize ;\n    // let y = 30;\n    let x2 = x + pseudoBeatPixels *utils.BBSToBeats(note.duration);\n\n    items.push(\n      <line x1={x} y1={y} x2={x2} y2={y} stroke=\"black\" strokeWidth={strokeWidth} key={index}/>\n    );\n  });\n  return (\n    <>\n      {items}\n    </>\n  );\n}\n\nconst rightMargin = 1;\nexport default function Region(props) {\n\n  return (\n    <div className=\"region\" style={{height: props.data.trackHeight - 2*props.data.trackDisplayPadding, width:props.data.beatPixels * utils.BBSToBeats(props.region.duration)}}>\n      <div className=\"region-wrapper\" style={{width:-1* rightMargin + props.data.beatPixels * utils.BBSToBeats(props.region.duration)}}>\n        <div className=\"region-title\">\n          {props.region.title}\n        </div>\n        <svg preserveAspectRatio=\"none\" viewBox={\"0 0 \" + svgSize + \" \"+ svgSize} className=\"region-svg\" style={{width:\"calc(100% + 1px)\"}}>\n          {renderRegion(props.region, props.data)}\n        </svg>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport \"./TrackParts.css\";\nimport Tone from \"tone\";\nimport {Fragment} from 'react';\nimport * as utils from '../CoolHelpers';\n// import $ from 'jquery';\n\nfunction renderBeat(x, bar, beat, beatPixels, key, height) {\n  return(\n    <Fragment key={key}>\n      <rect x={x} y='0' width=\"1\" height={height} fill=\"#e6e6e6\" />\n    </Fragment>\n  );\n\n}\n\nfunction renderRuler(data) {\n  let items = [];\n  let ts = Tone.Transport.timeSignature;\n  for (let i = 0; i < utils.BBSToBeats(data.projectMaxLength); i++) {\n    items.push(\n      renderBeat(i * data.beatPixels, Math.floor(i/ts), i%ts, data.beatPixels, i, data.trackHeight)\n    );\n  }\n  return (\n    <>\n      {items}\n    </>\n  );\n}\n\nexport default function TimelineGrid(props) {\n  return (\n    <div className=\"timeline-grid\" style={{ width: -1* props.data.trackDisplayPadding + utils.BBSToBeats(props.data.projectMaxLength) * props.data.beatPixels}}>\n      <svg height=\"100%\" width=\"100%\">\n          {renderRuler(props.data)}\n      </svg>\n    </div>\n  );\n}\n","import React from 'react';\nimport './TrackParts.css';\nimport Region from './Region';\n\nimport * as utils from '../CoolHelpers';\nimport TimelineGrid from './TimelineGrid';\n\n/*i have to do this - 2*0 bullshit in the height for some\nreason in order to get it to update . . . no clue why.\nI would think it has something to do with callbacks and\nshit but + 2*0 doesn't work either!\n */\n\nexport default function TrackDisplay(props) {\n  // console.log(props.data.trackHeight);\n  return (\n    <div className=\"track-part bottom right track-display\" style={{height: props.data.trackHeight - 2*0, padding: props.data.trackDisplayPadding, width: utils.BBSToBeats(props.data.projectMaxLength) * props.data.beatPixels}}>\n      <TimelineGrid data={props.data}/>\n        {props.track.regions.map((region, index) => {\n          return <Region region={region} data={props.data} key={index} />;\n        })}\n    </div>\n  );\n}\n\n// <div className=\"track-part track-display-wrapper\" style={{padding: props.trackDisplayPadding}}>\n//   <div className=\"track-display\" style={{width: utils.BBSToBeats(props.data.projectMaxLength) * props.data.beatPixels}}>\n//     <TrackCanvas track={props.track} data={props.data} />\n//   </div>\n// </div>\n","import React from 'react';\nimport Tone from \"tone\";\nimport './Playhead.css';\nimport * as utils from '../CoolHelpers';\n\nimport AnimatedRenderer from './AnimatedRenderer';\n\nconst topWidth = 11;\nconst bottomWidth = 1;\n\nexport default function Playhead(props) {\n  return (\n\n    <AnimatedRenderer render={data => (\n      <div className={\"playhead \" + props.variant} style={{height: (props.variant === 'top' ? topWidth : props.data.tracks.length * props.data.trackHeight), width: (props.variant === 'top' ? topWidth : bottomWidth), left: (props.variant === 'top' ? Math.ceil(-topWidth/2) : 0) + props.data.trackDisplayPadding + props.data.beatPixels * utils.BBSToBeats(Tone.Transport.position)}}>\n\n      </div>\n    )}/>\n\n\n  );\n}\n","import React from 'react';\n// import Tone from \"tone\";\nimport './EndScreen.css';\nimport * as utils from '../CoolHelpers';\n\nexport default function EndScreen(props) {\n  // console.log('i think its' + utils.BBSToBeats(props.data.projectLength))\n  return (\n\n    <div className=\"end-screen\" style={{height: (props.variant === 'top' ? \"100%\" : props.data.tracks.length * props.data.trackHeight), left: props.data.trackDisplayPadding + props.data.beatPixels * utils.BBSToBeats(props.data.projectLength), width: -1*props.data.trackDisplayPadding + props.data.beatPixels * utils.BBSToBeats(utils.subtractBBSTimes(props.data.projectMaxLength, props.data.projectLength))}}>\n\n    </div>\n\n\n  );\n}\n","import React from 'react';\nimport Tone from \"tone\";\nimport './LoopScreen.css';\nimport * as utils from '../CoolHelpers';\n\nexport default function Playhead(props) {\n  // console.log('i think its' + utils.BBSToBeats(props.data.projectLength))\n  return (\n\n    <div className=\"loop-screen\" style={{left: props.data.trackDisplayPadding + utils.BBSToBeats(Tone.Transport.loopStart) * utils.BBSToBeats(props.data.projectLength), width: props.data.beatPixels * utils.BBSToBeats(utils.subtractBBSTimes(Tone.Transport.loopEnd, Tone.Transport.loopStart))}}></div>\n\n  );\n}\n","import React from 'react';\nimport \"./TrackParts.css\";\nimport Tone from \"tone\";\nimport {Fragment} from 'react';\nimport * as utils from '../CoolHelpers';\n// import $ from 'jquery';\n\nconst padding = 4;\nconst beatPixelsCutoff=50;\n\nfunction renderBeat(x, bar, beat, beatPixels, key) {\n\n  if (beatPixels < beatPixelsCutoff) {\n    return(\n      <Fragment key={key}>\n        {beat === 0 ? <text x={x+padding} y=\"1em\" >{bar}</text> : <></>}\n        <rect x={x} y={beat===0? \"0\" : \"1.5em\"} width=\"1\" height=\"100\" fill=\"#e6e6e6\" />\n      </Fragment>\n    );\n  } else {\n    return(\n      <Fragment key={key}>\n        <text x={x+padding} y=\"1em\" >{bar}.{beat}</text>\n        <rect x={x} y={beat===0? \"0\" : \"1.5em\"} width=\"1\" height=\"100\" fill=\"#e6e6e6\" />\n      </Fragment>\n    );\n  }\n\n}\n\nfunction renderRuler(data) {\n  let items = [];\n  let ts = Tone.Transport.timeSignature;\n  for (let i = 0; i < utils.BBSToBeats(data.projectMaxLength); i++) {\n    items.push(\n      renderBeat(i * data.beatPixels, Math.floor(i/ts), i%ts, data.beatPixels, i)\n    );\n  }\n  return (\n    <>\n      {items}\n    </>\n  );\n}\n\nexport default function TimelineRuler(props) {\n  return (\n    <div className=\"track-part top right\" style={{padding: props.data.trackDisplayPadding, width: utils.BBSToBeats(props.data.projectMaxLength) * props.data.beatPixels}}>\n      <svg height=\"100\" width={utils.BBSToBeats(props.data.projectMaxLength) * props.data.beatPixels}>\n          {renderRuler(props.data)}\n      </svg>\n    </div>\n  );\n}\n","import React from 'react';\nimport {useState} from 'react';\nimport { ScrollSync, ScrollSyncPane } from 'react-scroll-sync';\nimport \"../HiddenScrollbar.css\";\nimport \"./TracksView.css\";\n// import Tone from 'tone';\n\nimport TrackHeader from './TrackHeader';\nimport TrackDisplay from './TrackDisplay';\nimport Playhead from './Playhead';\nimport EndScreen from './EndScreen';\nimport LoopScreen from './LoopScreen';\nimport TimelineRuler from './TimelineRuler.js';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faArrowsAltV, faArrowsAltH} from '@fortawesome/free-solid-svg-icons'\n\nconst trackDisplayPadding = 8;\n\nexport default function TracksView(props) {\n    const [trackHeight, setTrackHeight] = useState(120);\n    let newData = Object.assign({}, props.data, {trackDisplayPadding: trackDisplayPadding, trackHeight: trackHeight});\n\n\n\n    return(\n      <ScrollSync>\n        <div className=\"master\">\n          <div className=\"column left\">\n            <div className=\"pane top left track-part\">header</div>\n            <ScrollSyncPane group={[\"horizontal\", \"vertical\"]}>\n              <div className=\"pane bottom left hidden-scrollbar\">\n                {props.data.tracks.map((track, index) => {\n                  return <TrackHeader key={index} index={index} track={props.data.tracks[index]} data={newData} methods={props.methods}/>\n                })}\n              </div>\n            </ScrollSyncPane>\n          </div>\n          <div className=\"column right\">\n\n            <ScrollSyncPane group={[\"horizontal\", \"vertical\"]}>\n              <div className=\"pane top right hidden-scrollbar\">\n                <div className=\"tracks-view-sliders-container\" >\n                  <div className=\"tracks-view-slider\">\n                    <span className=\"tracks-view-slider-title\"><FontAwesomeIcon icon={faArrowsAltV}/></span>\n                    <input type=\"range\" min=\"10\" max=\"310\" step=\"10\" value={trackHeight} onChange={(e) => setTrackHeight(e.target.value)}></input>\n                  </div>\n                  <div className=\"tracks-view-slider\">\n                    <span className=\"tracks-view-slider-title\"><FontAwesomeIcon icon={faArrowsAltH}/></span>\n                    <input type=\"range\" min=\"10\" max=\"310\" step=\"50\" value={props.data.beatPixels} onChange={(e) => props.methods.setBeatPixels(e.target.value)}></input>\n                  </div>\n                </div>\n                <Playhead variant={'top'} data={newData}/>\n                <LoopScreen data={newData}/>\n                <EndScreen variant={'top'} data={newData}/>\n                <TimelineRuler data={newData}/>\n              </div>\n            </ScrollSyncPane>\n            <ScrollSyncPane group={[\"horizontal\", \"vertical\"]}>\n              <div className=\"pane bottom right\">\n\n                <Playhead variant={'bottom'} data={newData}/>\n                <EndScreen variant={'bottom'} data={newData}/>\n                {props.data.tracks.map((track, index) => {\n                  return <TrackDisplay key={index} index={index} track={props.data.tracks[index]} data={newData} methods={props.methods}/>;\n                })}\n              </div>\n            </ScrollSyncPane>\n          </div>\n\n\n        </div>\n      </ScrollSync>\n    );\n}\n","import React, { useState, useEffect } from 'react';\n// import logo from './logo.svg';\nimport './App.css';\nimport NavBar from './Components/NavBar';\n// import AnimatedRenderer from './Components/AnimatedRenderer';\nimport TransportPosition from './Components/TransportPosition';\nimport Meter from './Components/Meter';\nimport TracksView from './Components/TracksView';\n\nimport * as utils from './CoolHelpers';\n\n//font awesome icons\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPause, faPlay, faPlus, faStepForward, faStepBackward, faRuler } from '@fortawesome/free-solid-svg-icons'\n\nimport Tone from \"tone\";\n\nimport metronome_bar from \"./sounds/metronome_bar.mp3\"\nimport metronome_beat from \"./sounds/metronome_beat.mp3\"\n\n\n\n\n\nTone.Transport.setLoopPoints(0, \"1m\");\nTone.Transport.loop = true;\n\nconst metronomeVolume = new Tone.Volume();\nconst metronome = new Tone.Sampler({\n\t\"60\" : new Tone.Buffer(metronome_bar),\n\t\"61\" : new Tone.Buffer(metronome_beat)\n}).chain(metronomeVolume, Tone.Master);\n\n\nfunction hackNewRegion() {\n  let notes = [];\n  for (let i = 0; i < 30; i++) {\n    notes.push({pitch: Math.floor(Math.random() * (80 - 50)) + 40, duration: '8n', position: '0:0:' + 2*i});\n  }\n  return {title: \"melodyy\", duration:\"0:16:0\", position:\"0:0:0\", notes: notes}\n}\n\n\nfunction projectLength(tracks) {\n  let length = '0:0:0';\n  if (Tone.Transport.loop) {\n    length = Tone.Time(Tone.Transport.loopEnd).toBarsBeatsSixteenths();\n  }\n  tracks.forEach((track) => {\n    track.regions.forEach((region) => {\n      let endPosition = utils.addBBSTimes(region.position, region.duration);\n      if (utils.compareBBSTimes(endPosition, length) > 0) {\n        length = endPosition;\n      }\n    });\n\n  });\n  // console.log(length);\n  return '0:' + Math.ceil(utils.BBSToBeats(length)) + ':0';\n}\n\nfunction projectMaxLength(tracks) {\n  let maxLength = \"96:0:0\";\n  if (utils.compareBBSTimes(projectLength(tracks), maxLength) > 0) {\n    maxLength = projectLength(tracks);\n  }\n  return maxLength;\n}\n\n\nfunction App() {\n  const [playing, setPlaying] = useState(false);\n  const [tempo, setTempo] = useState(120);\n  const [key, setKey] = useState(0);\n  const [beatPixels, setBeatPixels] = useState(110);\n  const [tracks, setTracks] = useState([\n    {instrument: new Tone.Synth().toMaster(), regions: [{title: \"cde\", position:'0:0:0', duration: '1:0:0',  notes: [{pitch: 60, duration: '8n', position: '0:0:0'}, {pitch: 62, duration: '8n', position: '0:1:0'}, {pitch: 64, duration: '8n', position: '0:2:0'}] }]}\n  ]);\n\tconst [metronomeIsMuted, setMetronomeIsMuted] = useState(false);\n\n\n  useEffect(() => {\n    metronomeVolume.mute = metronomeIsMuted;\n\n    if (playing) {\n      Tone.Transport.start();\n    } else {\n      Tone.Transport.pause();\n    }\n\n    Tone.Transport.bpm.value = tempo;\n\n\n    updateTransport();\n\n\n  });\n\n  function updateTransport() {\n    Tone.Transport.cancel();\n    tracks.forEach((track) => {\n      track.regions.forEach((region) => {\n        region.notes.forEach((note) => {\n          Tone.Transport.schedule(function(time) {\n            track.instrument.triggerAttackRelease(Tone.Frequency(note.pitch, \"midi\").toNote(), note.duration, time);\n          },  utils.addBBSTimes(note.position, region.position));\n        });\n      });\n\n    });\n\n    for (let i = 0; i < utils.BBSToBeats(projectMaxLength(tracks)); i++) {\n\n      let pitch = i%Tone.Transport.timeSignature === 0? 60 : 61;\n      Tone.Transport.schedule(function(time) {\n        metronome.triggerAttackRelease(Tone.Frequency(pitch, 'midi').toNote(), 0.1, time);\n      }, '0:' + i + \":0\");\n    }\n\n\n  }\n\n  function removeTrack(index) {\n    setTracks(tracks.slice(0, index).concat(tracks.slice(index+1)));\n  }\n\n\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <NavBar />\n        <div className=\"App-menu-bar\">\n          <input id=\"title\" type=\"text\" placeholder=\"Untitled Project\"></input>\n        </div>\n        <div className=\"App-menu-bar\">\n          <button className=\"menu-button\" onClick={() => {\n            // console.log('hi');\n            setTracks(tracks.concat({instrument: new Tone.Synth().toMaster(), regions: [hackNewRegion()]}));\n            // console.log(tracks.length);\n          }}>\n            <FontAwesomeIcon icon={faPlus} /> new beat\n          </button>\n          <button className=\"menu-button\" onClick={() => {\n            Tone.Transport.pause();\n            Tone.Transport.position = \"0:0:0\";\n            if (playing) {\n              Tone.Transport.start();\n            } else {\n              Tone.Transport.pause();\n            }\n          }}>\n            <FontAwesomeIcon icon={faStepBackward} />\n          </button>\n          <button className=\"menu-button\" onClick={() => {\n\n            if (Tone.context.state !== 'running') {\n              Tone.context.resume();\n            }\n            setPlaying(!playing);\n\n          }}>\n            {playing? <FontAwesomeIcon icon={faPause} /> : <FontAwesomeIcon icon={faPlay} />}\n          </button>\n          <button className=\"menu-button\">\n            <FontAwesomeIcon icon={faStepForward} />\n          </button>\n          <button className=\"menu-button\">\n            <label>Tempo:</label> <input id=\"tempo\" type=\"number\" value={tempo} onChange={(e) => setTempo(e.target.value)}></input>\n          </button>\n          <button className=\"menu-button\">\n            <label>Key:</label> <select id=\"key\" value={key} onChange={(e) => setKey(e.target.value)}>\n              <option>0</option>\n              <option>1</option>\n              <option>2</option>\n              <option>3</option>\n              <option>4</option>\n              <option>5</option>\n              <option>6</option>\n              <option>7</option>\n              <option>8</option>\n              <option>9</option>\n              <option>10</option>\n              <option>11</option>\n            </select>\n          </button>\n\n\n          <TransportPosition/>\n\n          <Meter source={Tone.Master}/>\n\n\n\n\n\n\t\t\t\t\t{/*style={{background: metronomeIsMuted ? \"grey\" : \"meadiumseagreen\"}}*/}\n          <button className={\"menu-button metronome \"+ (metronomeIsMuted ? \"muted\" : \"unmuted\")} onClick={() => {\n\t\t\t\t\t\tif (Tone.context.state !== 'running') {\n              Tone.context.resume();\n            }\n\t\t\t\t\t\tsetMetronomeIsMuted(!metronomeIsMuted);\n\t\t\t\t\t}}>\n            <FontAwesomeIcon icon={faRuler} />\n          </button>\n            {/*<input type=\"range\" min=\"10\" max=\"310\" step=\"50\" value={beatPixels} onChange={(e) => setBeatPixels(e.target.value)}></input>*/}\n\n\n        </div>\n      </header>\n      <TracksView data={{tracks: tracks, beatPixels: beatPixels, projectLength: projectLength(tracks), projectMaxLength: projectMaxLength(tracks)}} methods={{removeTrack: removeTrack, setBeatPixels: setBeatPixels}}/>\n      <footer className=\"App-menu-bar\">fotoer\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}